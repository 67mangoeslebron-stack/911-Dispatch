<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PARKVIEW CAD - DISPATCH HUB V150</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="login-screen" class="modal-overlay">
        <div class="system-box">
            <h2>PARKVIEW COUNTY 911</h2>
            <p>DISPATCH TERMINAL V150</p>
            <button class="primary-btn" onclick="startSystem()">INITIALIZE HUB</button>
        </div>
    </div>

    <div class="cad-container">
        
        <div class="panel dispatch-hub">
            <div class="panel-header">
                <span>FLEET STATUS HUB</span>
                <span id="clock">00:00</span>
            </div>

            <div class="unit-grid-header">
                <span>UNIT</span><span>LOCATION</span><span>STATUS</span>
            </div>
            <div id="unit-list" class="unit-list">
                </div>

            <div class="panel-header" style="margin-top:15px;">ACTIVE INCIDENT</div>
            <div id="incident-container">
                <div id="no-call" class="placeholder">NO PENDING CALLS</div>
                <div id="incident-card" class="card hidden">
                    <div class="card-row"><label>TYPE</label><span id="inc-type" class="val-red">--</span></div>
                    <div class="card-row"><label>ADDRESS</label><span id="inc-loc" class="val-bold">--</span></div>
                    <div id="sms-area" class="hidden">
                        <div id="sms-log"></div>
                        <input type="text" id="sms-input" placeholder="Type SMS response...">
                    </div>
                </div>
            </div>

            <div class="hub-footer">
                <button class="trigger-btn" onclick="triggerIncident()">[GENERATE 911 CALL]</button>
            </div>
        </div>

        <div class="map-container">
            <div id="mic-indicator" class="mic-hud hidden">
                <div class="pulse-red"></div>
                <span id="mic-label">PTT ACTIVE: SPEAK NOW</span>
            </div>
            
            <div id="incoming-modal" class="alert-modal hidden">
                <div class="alert-inner">
                    <h2 class="blink">911 LINE ACTIVE</h2>
                    <p id="alert-desc">VOICE CALL INCOMING</p>
                    <button class="accept-btn" onclick="acceptCall()">ACCEPT TRANSMISSION</button>
                </div>
            </div>

            <canvas id="cad-map"></canvas>
        </div>

        <div class="panel logs-panel">
            <div class="panel-header">RADIO/CAD LOG</div>
            <div id="system-log" class="log-entries"></div>
            
            <div class="sticky-note">
                <strong>DISPATCH CODES:</strong><br>
                - "[Unit] Respond" (Dispatch)<br>
                - "[Unit] Clear" (Reset)<br>
                - Air-1: Jail Roof Access only.
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
